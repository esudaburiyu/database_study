#MySQLでビューを作る。
######統計処理をするときの、中間結果として、ビューを作るのって作法としてありなのかな?

#仮設1
フォロー数の標準偏差より、フォロワー数の標準偏差のほうが多い気がする。

#検証
~~~
select avg(follow), std(follow), avg(follower),std(follower) from users;
+-------------+-------------+---------------+---------------+
| avg(follow) | std(follow) | avg(follower) | std(follower) |
+-------------+-------------+---------------+---------------+
|    873.1352 |   7180.3427 |     2131.7444 |    35524.7671 |
+-------------+-------------+---------------+---------------+
1 row in set (3.20 sec)
~~~

実際、そのような傾向が見られる。ただし、平均についても、followerのほうがずっと大きい。

中央値はどうだろう? 仮説としては、対して差がないと思うのだが

followerの標準偏差について、ちょっと大きすぎる、と感じる。
標準偏差が35000って、どういうふうに解釈すればいいんだろう?

follwerが2000人を超えているのは、20万人あつめて、２万人ほど。上位10%ってことだ。

ヒストグラム作ったほうがいいな。

~~~
mysql> select follower from users order by follower limit 109305, 1;
+----------+
| follower |
+----------+
|      283 |
+----------+
1 row in set (4.31 sec)

mysql> select follow from users order by follow limit 109305, 1;
+--------+
| follow |
+--------+
|    264 |
+--------+
1 row in set (4.19 sec)
~~~

大差ない、と言える。。。か?

#他のソースと比較する
[参考](http://www.garbagenews.net/archives/2053905.html)

今回とったのと、かなり違うデータだ。取得しているのは、データをとっている間につぶやいたヒトのものだから、アクティブユーザーのデータだけだし、鍵つきのユーザーは除かれている。

#平均値と中央値
こういうケースでは、平均値より中央値をもちいるべき。
なぜ?　えーっと。。。

#ビューの作成
~~~
create view users as select * from twitter_public_2 group by user;
~~~

#ビューへの問い合わせ
少なくともSelectについては、テーブルと同じようにアクセスできる

~~~
 select count(*) from users;
~~~

~~~
+----------+
| count(*) |
+----------+
|   218610 |
+----------+
1 row in set (3.76 sec)
~~~

| lang | c     | a1        | s1         | a2         | s2         |
| --- | --- | --- | --- | --- | --- |
| lo   |     1 |  788.0000 |     0.0000 |   903.0000 |     0.0000 |
| am   |     1 |   39.0000 |     0.0000 |     3.0000 |     0.0000 |
| dv   |     1 |  913.0000 |     0.0000 |   414.0000 |     0.0000 |
| pa   |     2 |    5.0000 |     3.0000 |     4.5000 |     4.5000 |
| km   |     2 |   44.5000 |    30.5000 |    24.0000 |    23.0000 |
| gu   |     2 |  191.5000 |   170.5000 |   376.0000 |    44.0000 |
| ml   |     3 |   54.0000 |    72.8606 |   168.3333 |   236.6465 |
| ka   |     4 |  399.0000 |   403.9746 |   427.7500 |   348.9695 |
| my   |     3 |   13.3333 |     9.4281 |   287.3333 |   393.6914 |
| si   |     2 |   53.5000 |    51.5000 |   724.0000 |   414.0000 |
| he   |    93 |  236.2043 |   295.3517 |   389.5484 |   571.6753 |
| bo   |     3 |  457.6667 |    57.7427 |   982.6667 |   720.8672 |
| fi   |   186 |  443.4839 |   515.9370 |   582.9140 |   954.7528 |
| hy   |     9 |   73.2222 |    96.7250 |   570.7778 |  1005.3709 |
| ne   |    15 |  903.5333 |  1071.9372 |   908.4000 |  1078.7045 |
| fa   |   137 |  332.5182 |   438.8112 |   887.6277 |  1577.9867 |
| is   |    43 |  526.0698 |   677.8495 |   883.1860 |  1849.1785 |
| lt   |   130 |  379.2462 |   707.6124 |   643.4846 |  1857.5330 |
| da   |   183 |  468.9071 |   673.7695 |  1000.5792 |  2490.8477 |
| kn   |     5 |  339.6000 |   495.7639 |  1366.4000 |  2605.1826 |
| no   |   151 |  550.1523 |   857.3139 |   969.0331 |  2828.9043 |
| zh   |   187 |  357.1123 |   943.1746 |   943.0481 |  2930.9864 |
| ta   |    18 |  637.5000 |   824.3816 |  2147.6111 |  3017.4268 |
| te   |     2 |   17.5000 |     9.5000 |  3296.0000 |  3290.0000 |
| sv   |   495 |  419.9818 |   616.1449 |   998.4525 |  3609.8079 |
| vi   |   967 |  569.0496 |  2733.3920 |   830.1448 |  3618.3201 |
| bn   |    21 |  179.0000 |   393.7864 |  1036.4286 |  3848.8707 |
| pl   |   753 | 1069.5631 |  2776.8091 |  1589.9203 |  4540.4833 |
| de   |  1332 |  813.5653 |  2380.7455 |  1457.4550 |  4687.0559 |
| th   |  4179 |  255.9012 |   281.4527 |   496.1445 |  5084.6802 |
| hu   |   194 |  434.0155 |   635.2812 |  1206.4072 |  6429.0967 |
| sk   |   404 |  681.5248 |  1326.8592 |  1454.6287 |  6513.4806 |
| ht   |   401 |  606.7456 |  1390.2610 |  1429.1771 |  6684.4225 |
| et   |   557 |  767.8689 |  4190.8273 |  1315.7361 |  6843.4863 |
| nl   |  1627 |  638.1813 |  1530.2989 |  1523.5034 |  7236.4357 |
| ja   | 64341 |  551.6340 |  2519.0005 |   775.8052 |  7515.5843 |
| ru   |  5089 |  446.8377 |  1722.0690 |  1064.3671 |  8168.4261 |
| sl   |   623 |  749.1124 |  2935.9717 |  1572.3242 |  8213.8348 |
| und  |  5051 |  768.3552 |  5124.8865 |  1154.7709 |  8223.2690 |
| ko   |  4165 |  986.0800 |  9182.8159 |  1132.0459 |  9702.4290 |
| el   |   287 | 1460.1882 |  2661.1185 |  3136.6620 | 12492.1718 |
| fr   |  3734 |  598.5270 |  3257.3646 |  1592.7169 | 13443.8449 |
| lv   |   339 |  479.5900 |  1140.0538 |  2075.5280 | 14468.7822 |
| tl   |  5222 |  491.3719 |  1200.5291 |  1128.4180 | 16170.8299 |
| ur   |    47 |  332.2979 |   464.4796 |  3434.0851 | 18364.8228 |
| tr   |  7960 | 2128.6739 |  9071.4937 |  3069.9941 | 18414.8876 |
| uk   |   122 |  362.5328 |  1152.4672 |  3649.0082 | 22290.9590 |
| bg   |   258 |  425.2403 |   788.4885 |  2136.1124 | 26386.1782 |
| id   | 27127 |  443.2522 |  1159.4663 |  1863.2241 | 35787.1700 |
| it   |  1761 |  946.3146 |  3030.5405 |  3540.3118 | 39116.9604 |
| en   | 47560 | 1009.8844 |  4989.5571 |  2832.3201 | 48438.5258 |
| ar   | 13215 | 2675.8576 | 23946.8177 |  5705.2211 | 52186.3453 |
| pt   |  6247 | 1051.9845 |  4796.3590 |  3459.7946 | 58057.7066 |
| es   | 13294 |  917.8929 |  6633.8320 |  4433.9933 | 66553.0103 |
| hi   |    55 |  406.4000 |  1006.4759 | 10443.3273 | 72696.8072 |


ja	64341	551.6340	2519.0005	775.8052	7515.5843
64341人のデータを集めて、フォロー数について、平均551.6340、標準偏差2519


ツイッターのフォロー数のようなデータは、べき分布になる、と聞いたことがある。
データは集めたけれど、これがべき分布に従うのか、正規分布に従うのか、どうやって判断すればいいんだろう?

フォロワー数が、べき分布に従う、というのは分かる気がするが、フォロー数もべき分布に従う、ってどうしていえる?そもそも言える?
